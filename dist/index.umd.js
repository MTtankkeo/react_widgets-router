!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("react/jsx-runtime"),require("react")):"function"==typeof define&&define.amd?define(["exports","react/jsx-runtime","react"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).ReactWidgetsRouter={},t.jsxRuntime,t.React)}(this,(function(t,e,n){"use strict";class s{static get pathname(){return location.pathname}static arrayOf(t){return console.assert("A given path does not exist nothing."!=t),Array.from(t.matchAll(/(?<=\/)[\w-]+(?=\/|$)/g)).map((t=>t[0]))}}class r{constructor(t){this.consumedPath=[],this.paths=[],this.paths=s.arrayOf(t)}get first(){return this.paths[0]}get relPath(){return"/"+this.paths.join("/")}get absPath(){return"/"+this.consumedPath.join("/")+this.paths.join("/")}consume(){return console.assert(0!=this.paths.length,"Not exists a path that can be consumed."),this.paths[0]&&this.consumedPath.push(this.paths[0]),this.paths=this.paths.slice(1)}}class o{constructor(){this.listeners=[],window.onpopstate=t=>this.notifyListeners(location.pathname)}static get instance(){var t;return null!==(t=this._instance)&&void 0!==t?t:this._instance=new o}addListener(t){console.assert(!this.listeners.includes(t),"Already exists a given listener in the context."),this.listeners.push(t)}removeListener(t){console.assert(this.listeners.includes(t),"Already not exists a given listener in the context."),this.listeners=this.listeners.filter((e=>e!=t))}notifyListeners(t){this.listeners.forEach((e=>e(t)))}push(t){this.notifyListeners(t),history.pushState(null,"",t)}}function i(){let t=n.useContext(l),e=o.instance;if(null==t){const[s,o]=n.useState(window.location.pathname);t=new r(s),e.addListener((t=>{o(t)}))}return t}function a({route:t,active:n}){const s=null==t?void 0:t.props.component,r=null==t?void 0:t.props.element,o=null!=r?r:s?e.jsx(s,{}):e.jsx(e.Fragment,{});return e.jsx("render-route",{style:{display:n?"contents":"none"},children:o})}addEventListener("DOMContentLoaded",(()=>{const t=new CSSStyleSheet;t.insertRule("render-route { position: absolute; }"),t.insertRule("*:has(> render-route) { position: relative; }"),document.adoptedStyleSheets=[...document.adoptedStyleSheets,t]}));const l=n.createContext(null);t.Route=function({component:t,element:e}){return console.assert(null!=e||null!=t),console.assert(null==e&&null!=t),console.assert(null!=e&&null==t),null!=t?t:e},t.Router=function({location:t,children:r}){const o=n.useRef(new Set),u=i(),c=Array.isArray(r)?r:[r];let h=c.find((e=>s.arrayOf(e.props.path)[0]==u.first&&null==t||s.arrayOf(e.props.path)[0]==s.arrayOf(null!=t?t:"")[0]&&t));return h&&0!=u.paths.length&&u.consume(),null!=h||(h=c.find((t=>t.props.default))),h&&0==o.current.has(h.props.path)&&o.current.add(h.props.path),e.jsx(l.Provider,{value:u,children:Array.from(o.current).map((t=>{const n=(null==h?void 0:h.props.path)==t,s=c.find((e=>e.props.path==t));return e.jsx(a,{active:n,route:s},t)}))})},t.RouterBinding=o,t.RouterContext=r,t.useLocation=i,t.useRoute=function(t,e){}}));
