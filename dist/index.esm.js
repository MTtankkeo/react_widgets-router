import{jsx as t,Fragment as e}from"react/jsx-runtime";import{useContext as n,useState as s,createContext as r,useRef as i}from"react";class o{static get pathname(){return location.pathname}static arrayOf(t){return console.assert("A given path does not exist nothing."!=t),Array.from(t.matchAll(/(?<=\/)[\w-]+(?=\/|$)/g)).map((t=>t[0]))}}class a{constructor(t){this.consumedPath=[],this.paths=[],this.paths=o.arrayOf(t)}get first(){return this.paths[0]}get relPath(){return"/"+this.paths.join("/")}get absPath(){return"/"+this.consumedPath.join("/")+this.paths.join("/")}consume(){return console.assert(0!=this.paths.length,"Not exists a path that can be consumed."),this.paths[0]&&this.consumedPath.push(this.paths[0]),this.paths=this.paths.slice(1)}}class l{constructor(){this.listeners=[],window.onpopstate=t=>this.notifyListeners(location.pathname)}static get instance(){var t;return null!==(t=this._instance)&&void 0!==t?t:this._instance=new l}addListener(t){console.assert(!this.listeners.includes(t),"Already exists a given listener in the context."),this.listeners.push(t)}removeListener(t){console.assert(this.listeners.includes(t),"Already not exists a given listener in the context."),this.listeners=this.listeners.filter((e=>e!=t))}notifyListeners(t){this.listeners.forEach((e=>e(t)))}push(t){this.notifyListeners(t),history.pushState(null,"",t)}}function h(){let t=n(u),e=l.instance;if(null==t){const[n,r]=s(window.location.pathname);t=new a(n),e.addListener((t=>{r(t)}))}return t}function c({route:n,active:s}){const r=null==n?void 0:n.props.component,i=null==n?void 0:n.props.element,o=null!=i?i:t(r||e,{});return t("render-route",{style:{display:s?"contents":"none"},children:o})}addEventListener("DOMContentLoaded",(()=>{const t=new CSSStyleSheet;t.insertRule("render-route { position: absolute; }"),t.insertRule("*:has(> render-route) { position: relative; }"),document.adoptedStyleSheets=[...document.adoptedStyleSheets,t]}));const u=r(null);function p({location:e,children:n}){const s=i(new Set),r=h(),a=Array.isArray(n)?n:[n];let l=a.find((t=>o.arrayOf(t.props.path)[0]==r.first&&null==e||o.arrayOf(t.props.path)[0]==o.arrayOf(null!=e?e:"")[0]&&e));return l&&0!=r.paths.length&&r.consume(),null!=l||(l=a.find((t=>t.props.default))),l&&0==s.current.has(l.props.path)&&s.current.add(l.props.path),t(u.Provider,{value:r,children:Array.from(s.current).map((e=>{const n=(null==l?void 0:l.props.path)==e,s=a.find((t=>t.props.path==e));return t(c,{active:n,route:s},e)}))})}function d({component:t,element:e}){return console.assert(null!=e||null!=t),console.assert(null==e&&null!=t),console.assert(null!=e&&null==t),null!=t?t:e}function m(t,e){}export{d as Route,p as Router,l as RouterBinding,a as RouterContext,h as useLocation,m as useRoute};
